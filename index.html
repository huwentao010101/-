<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>行动轨迹数据生成模拟</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: #fff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            width: 95%;
            max-width: 1200px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        header {
            text-align: center;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .description {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        .content {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .map-container {
            flex: 2;
            min-width: 300px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 15px;
            backdrop-filter: blur(5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .map {
            width: 100%;
            height: 500px;
            background: #2c3e50;
            border-radius: 10px;
            position: relative;
            background-image: 
                linear-gradient(rgba(255, 255, 255, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            overflow: hidden;
        }
        
        .person {
            position: absolute;
            width: 20px;
            height: 20px;
            background: #ff3838;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 10px #ff3838, 0 0 20px #ff3838;
            z-index: 10;
            transition: left 1s linear, top 1s linear;
        }
        
        .path {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .path-line {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 5;
        }
        
        .info-panel {
            flex: 1;
            min-width: 300px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        .info-panel h2 {
            margin-bottom: 20px;
            text-align: center;
            color: #fdbb2d;
        }
        
        .data-item {
            margin-bottom: 15px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
        }
        
        .data-label {
            font-weight: bold;
            color: #fdbb2d;
            margin-bottom: 5px;
        }
        
        .data-value {
            font-size: 1.2rem;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-play {
            background: #00b894;
            color: white;
        }
        
        .btn-pause {
            background: #fdcb6e;
            color: #2d3436;
        }
        
        .btn-reset {
            background: #ff7675;
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }
        
        .color-box {
            width: 15px;
            height: 15px;
            border-radius: 3px;
        }
        
        .slow { background: #00b894; }
        .medium { background: #fdcb6e; }
        .fast { background: #ff7675; }
        
        @media (max-width: 768px) {
            .content {
                flex-direction: column;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .description {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>行动轨迹数据生成模拟</h1>
            <p class="description">
                此动画模拟了移动设备如何生成和记录行动轨迹数据。轨迹点包含时间戳、经纬度坐标、移动速度和方向等信息。
            </p>
        </header>
        
        <div class="content">
            <div class="map-container">
                <h2>城市地图轨迹模拟</h2>
                <div class="map">
                    <canvas class="path-line" id="pathLine"></canvas>
                    <div class="path" id="path"></div>
                    <div class="person" id="person"></div>
                </div>
            </div>
            
            <div class="info-panel">
                <h2>实时轨迹数据</h2>
                <div class="data-item">
                    <div class="data-label">时间戳</div>
                    <div class="data-value" id="timestamp">2023-10-15 08:00:00</div>
                </div>
                
                <div class="data-item">
                    <div class="data-label">当前位置</div>
                    <div class="data-value" id="position">39.9042° N, 116.4074° E</div>
                </div>
                
                <div class="data-item">
                    <div class="data-label">移动速度</div>
                    <div class="data-value" id="speed">0 km/h</div>
                </div>
                
                <div class="data-item">
                    <div class="data-label">方向</div>
                    <div class="data-value" id="direction">北</div>
                </div>
                
                <div class="data-item">
                    <div class="data-label">已生成轨迹点</div>
                    <div class="data-value" id="points">0</div>
                </div>
                
                <div class="controls">
                    <button class="btn btn-play" id="btnPlay">
                        <i class="fas fa-play"></i> 开始
                    </button>
                    <button class="btn btn-pause" id="btnPause">
                        <i class="fas fa-pause"></i> 暂停
                    </button>
                    <button class="btn btn-reset" id="btnReset">
                        <i class="fas fa-redo"></i> 重置
                    </button>
                </div>
            </div>
        </div>
        
        <div class="legend">
            <div class="legend-item">
                <div class="color-box slow"></div>
                <span>慢速 (0-10 km/h)</span>
            </div>
            <div class="legend-item">
                <div class="color-box medium"></div>
                <span>中速 (10-30 km/h)</span>
            </div>
            <div class="legend-item">
                <div class="color-box fast"></div>
                <span>快速 (30+ km/h)</span>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const person = document.getElementById('person');
            const path = document.getElementById('path');
            const pathLine = document.getElementById('pathLine');
            const timestamp = document.getElementById('timestamp');
            const position = document.getElementById('position');
            const speed = document.getElementById('speed');
            const direction = document.getElementById('direction');
            const points = document.getElementById('points');
            const btnPlay = document.getElementById('btnPlay');
            const btnPause = document.getElementById('btnPause');
            const btnReset = document.getElementById('btnReset');
            
            // 设置canvas尺寸
            const map = document.querySelector('.map');
            pathLine.width = map.offsetWidth;
            pathLine.height = map.offsetHeight;
            const ctx = pathLine.getContext('2d');
            
            let animationId = null;
            let isPlaying = false;
            let pointsCount = 0;
            let currentTime = new Date(2023, 9, 15, 8, 0, 0);
            let currentSpeed = 0;
            let currentDirection = '北';
            let previousPoint = null;
            
            // 预定义的路径点
            const route = [
                {x: 50, y: 450, speed: 0, direction: '东'},
                {x: 150, y: 450, speed: 5, direction: '东'},
                {x: 250, y: 400, speed: 8, direction: '东北'},
                {x: 350, y: 350, speed: 12, direction: '东北'},
                {x: 450, y: 300, speed: 15, direction: '北'},
                {x: 450, y: 200, speed: 10, direction: '北'},
                {x: 400, y: 150, speed: 7, direction: '西北'},
                {x: 300, y: 100, speed: 6, direction: '西'},
                {x: 200, y: 150, speed: 8, direction: '西南'},
                {x: 100, y: 200, speed: 9, direction: '南'},
                {x: 100, y: 300, speed: 12, direction: '东'},
                {x: 200, y: 350, speed: 15, direction: '东南'},
                {x: 300, y: 400, speed: 10, direction: '南'}
            ];
            
            let currentPointIndex = 0;
            
            // 初始化位置
            person.style.left = `${route[0].x}px`;
            person.style.top = `${route[0].y}px`;
            previousPoint = {x: route[0].x, y: route[0].y};
            
            // 格式化日期
            function formatDate(date) {
                const year = date.getFullYear();
                const month = String(date.getMonth() + 1).padStart(2, '0');
                const day = String(date.getDate()).padStart(2, '0');
                const hours = String(date.getHours()).padStart(2, '0');
                const minutes = String(date.getMinutes()).padStart(2, '0');
                const seconds = String(date.getSeconds()).padStart(2, '0');
                
                return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;
            }
            
            // 绘制轨迹线
            function drawPathLine(fromX, fromY, toX, toY, speed) {
                ctx.beginPath();
                ctx.moveTo(fromX, fromY);
                ctx.lineTo(toX, toY);
                
                // 根据速度设置线条颜色
                if (speed < 10) {
                    ctx.strokeStyle = '#00b894';
                } else if (speed < 30) {
                    ctx.strokeStyle = '#fdcb6e';
                } else {
                    ctx.strokeStyle = '#ff7675';
                }
                
                ctx.lineWidth = 3;
                ctx.stroke();
            }
            
            // 生成轨迹点
            function generateTrackPoint(x, y, speed, direction) {
                pointsCount++;
                points.textContent = pointsCount;
                
                // 绘制轨迹线
                if (previousPoint) {
                    drawPathLine(previousPoint.x, previousPoint.y, x, y, speed);
                }
                previousPoint = {x, y};
                
                // 在实际应用中，这里会发送数据到服务器或存储到本地
                console.log(`轨迹点 ${pointsCount}: 时间=${formatDate(currentTime)}, X=${x}, Y=${y}, 速度=${speed}km/h, 方向=${direction}`);
                
                // 绘制轨迹点
                const point = document.createElement('div');
                point.style.position = 'absolute';
                point.style.left = `${x}px`;
                point.style.top = `${y}px`;
                point.style.width = '6px';
                point.style.height = '6px';
                point.style.borderRadius = '50%';
                point.style.transform = 'translate(-50%, -50%)';
                
                // 根据速度设置颜色
                if (speed < 10) {
                    point.style.backgroundColor = '#00b894';
                } else if (speed < 30) {
                    point.style.backgroundColor = '#fdcb6e';
                } else {
                    point.style.backgroundColor = '#ff7675';
                }
                
                path.appendChild(point);
            }
            
            // 更新位置和数据显示
            function updatePosition() {
                // 移动到下一个点
                currentPointIndex = (currentPointIndex + 1) % route.length;
                const nextPoint = route[currentPointIndex];
                
                // 更新人物位置
                person.style.left = `${nextPoint.x}px`;
                person.style.top = `${nextPoint.y}px`;
                
                // 更新时间
                currentTime = new Date(currentTime.getTime() + 2000); // 每2秒一个点
                timestamp.textContent = formatDate(currentTime);
                
                // 更新位置显示（模拟经纬度）
                const lat = 39.90 + (Math.random() * 0.01);
                const lng = 116.40 + (Math.random() * 0.01);
                position.textContent = `${lat.toFixed(4)}° N, ${lng.toFixed(4)}° E`;
                
                // 更新速度和方向
                currentSpeed = nextPoint.speed;
                currentDirection = nextPoint.direction;
                speed.textContent = `${currentSpeed} km/h`;
                direction.textContent = currentDirection;
                
                // 生成轨迹点
                generateTrackPoint(nextPoint.x, nextPoint.y, currentSpeed, currentDirection);
            }
            
            // 动画循环
            function animate() {
                if (!isPlaying) return;
                
                updatePosition();
                
                // 每2秒更新一次位置
                setTimeout(() => {
                    animationId = requestAnimationFrame(animate);
                }, 2000);
            }
            
            // 事件监听
            btnPlay.addEventListener('click', function() {
                if (isPlaying) return;
                
                isPlaying = true;
                btnPlay.disabled = true;
                btnPause.disabled = false;
                animate();
            });
            
            btnPause.addEventListener('click', function() {
                isPlaying = false;
                btnPlay.disabled = false;
                btnPause.disabled = true;
                cancelAnimationFrame(animationId);
            });
            
            btnReset.addEventListener('click', function() {
                isPlaying = false;
                cancelAnimationFrame(animationId);
                
                // 重置位置
                currentPointIndex = 0;
                person.style.left = `${route[0].x}px`;
                person.style.top = `${route[0].y}px`;
                previousPoint = {x: route[0].x, y: route[0].y};
                
                // 重置数据
                currentTime = new Date(2023, 9, 15, 8, 0, 0);
                timestamp.textContent = formatDate(currentTime);
                position.textContent = '39.9042° N, 116.4074° E';
                speed.textContent = '0 km/h';
                direction.textContent = '北';
                
                // 清除轨迹点和轨迹线
                path.innerHTML = '';
                ctx.clearRect(0, 0, pathLine.width, pathLine.height);
                pointsCount = 0;
                points.textContent = '0';
                
                btnPlay.disabled = false;
                btnPause.disabled = false;
            });
            
            // 初始化按钮状态
            btnPause.disabled = true;
        });
    </script>
</body>
</html>
